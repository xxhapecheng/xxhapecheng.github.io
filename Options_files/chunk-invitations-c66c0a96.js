System.register(["./chunk-vendor.js","./chunk-frameworks.js"],function(_){"use strict";var u,b,T,j;return{setters:[function(g){u=g.a,b=g.o},function(g){T=g.R,j=g.aK}],execute:function(){_({a:h,u:y});var g=Object.defineProperty,a=(e,t)=>g(e,"name",{value:t,configurable:!0});const f="team_ids[]",L="role",R=a((e,t)=>{const n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n},"createHiddenInput"),O=a(e=>{const t=new URLSearchParams(window.location.search),n=new Set(t.getAll(f)),o=document.querySelectorAll(e);for(const s of o)s.checked?n.add(s.value):n.delete(s.value);return[...n]},"getTeamIds"),x=a(e=>document.querySelectorAll(`${e} > a`),"getPaginationLinks");function h(e,t){if(e.checked)for(const n of document.querySelectorAll(t))n.appendChild(R(f,e.value));else for(const n of document.querySelectorAll(`input[type="hidden"][name="${f}"][value="${e.value}"]`))n.remove()}a(h,"addOrRemoveHiddenTeamIdInput");function y(e,t){const n=O(t);for(const o of x(e)){const s=o.getAttribute("href");if(s){const r=new URL(s,window.location.origin),i=new URLSearchParams(r.search.slice(1));i.delete(f);for(const d of n)i.append(f,d);r.search=i.toString(),o.setAttribute("href",r.toString())}}}a(y,"updateTeamIdsOnPaginationLinks"),u("click",".js-invitation-toggle-team",async function({currentTarget:e}){y(".js-invitations-team-suggestions-pagination",".js-invitation-toggle-team"),h(e,"form.js-org-team-suggestions")}),u("click",".js-invitation-radio-role",async function({currentTarget:e}){const n=e.value;for(const o of x(".js-invitations-team-suggestions-pagination")){const s=o.getAttribute("href");if(s){const r=new URL(s,window.location.origin),i=new URLSearchParams(r.search.slice(1));i.set("role",n),r.search=i.toString(),o.setAttribute("href",r.toString())}}for(const o of document.querySelectorAll(`input[type="hidden"][name="${L}"]`))o.remove();for(const o of document.querySelectorAll("form.js-org-member-role"))o.appendChild(R(L,n))});function v(){const e=document.querySelector(".js-org-reinstate-forms"),t=document.querySelectorAll(".js-org-reinstate-option:checked");if(!e||t.length!==1)return;const n=t[0].getAttribute("data-form"),o=e.getElementsByClassName("js-togglable-form");for(const r of o)r.classList.add("d-none");document.getElementById(n).classList.remove("d-none")}a(v,"syncReinstateSelection"),u("change",".js-org-reinstate-option",v),b(".js-org-reinstate-forms",v),b(".js-member-suggestion",function(){const e=Array.from(document.querySelectorAll(".js-badge")).map(t=>t.querySelector("input").value);if(e.length!==0)for(const t of document.querySelectorAll(".js-member-suggestion")){const n=t.getAttribute("data-autocomplete-value");if(e.includes(n)){t.classList.add("disabled"),t.setAttribute("aria-disabled","true");const o=t.querySelector(".js-non-member-warning-reason"),s=t.querySelector(".js-non-member-warning-action");if(o&&s)for(const r of[o,s])r.textContent=r.getAttribute("data-markup"),r instanceof HTMLElement&&(r.hidden=!1)}}}),u("combobox-commit",".js-badge-container .js-new-org-members-complete-results",e=>{const t=document.querySelector(".js-badge-input"),n=document.querySelector(".js-badges"),s=e.target.querySelectorAll(".js-badge-template"),r=Array.from(document.querySelectorAll(".js-badge")).map(i=>i.querySelector("input").value);for(const i of s){const l=i.cloneNode(!0).content,I=l.querySelector("input").value;r.includes(I)||n.append(l)}A(),B(e),t.value="",t.setAttribute("placeholder","")}),u("click",".js-badge-search-container .js-badge",e=>{const t=e.currentTarget;t.getAttribute("aria-pressed")==="true"?t.setAttribute("aria-pressed","false"):t.setAttribute("aria-pressed","true")}),u("details-dialog-close",".js-invite-member-dialog",e=>{const t=e.currentTarget.querySelector(".js-auto-complete-button");!t||(t.disabled=!0)}),u("click",".js-badge-search-container",e=>{e.currentTarget.querySelector("input").focus()}),u("click",".js-badge-container .js-member-suggestion",()=>{document.querySelector(".js-badge-input").focus()}),T("keydown",".js-badge-search-container .js-badge-input",e=>{const t=e.target,n=t.closest(".js-badge-search-container"),o=n.querySelectorAll('.js-badges .js-badge[aria-pressed="true"]'),s=n.getAttribute("data-allow-plan-increase"),r=e.key!=="Backspace"||t.value!=="";if(!s&&w()&&r){e.preventDefault();return}else if(r)return;if(o.length!==0)for(const i of o)i.remove(),k(i);else{const i=n.querySelectorAll(".js-badges .js-badge");if(i.length===0)return;const d=i[i.length-1];d.remove(),k(d)}A()});function m(){const e=document.querySelector(".js-seats");if(!e)return p();const t=e.getAttribute("data-filled-seats");return parseInt(t)+p()}a(m,"usedSeats");function A(){P()||(C(),F(),E(),H()?U():(c(".js-plan-no-change",!1),c(".js-plan-changes",!0),c(".js-complete-button",!1),c(".js-invite-button",!0)))}a(A,"updateSeatCounter");function C(){const e=document.querySelector(".js-filled-seats"),t=m();e&&t!==null&&(e.textContent=t.toString())}a(C,"updateFilledSeats");function P(){return p()<=0?(c(".js-plan-no-change",!0),c(".js-plan-changes",!0),!0):!1}a(P,"hideUpgradeMessage");function F(){const e=document.querySelector(".js-seats-remaining");if(e instanceof HTMLElement){e.hidden=!0;const t=S()-m(),n=document.querySelector(".js-seats-remaining-zero"),o=document.querySelector(".js-seats-remaining-singular"),s=document.querySelector(".js-seats-remaining-plural");if(n.hidden=t!==0,o.hidden=t!==1,t>1){const r=document.querySelector(".js-seats-remaining-update-target");r.textContent=String(t)}s.hidden=t<=1}}a(F,"updateSeatsRemaining");function E(){const e=document.querySelector(".js-max-seats-warning");e instanceof HTMLElement&&(e.hidden=!w())}a(E,"updateMaxSeatsWarning");function c(e,t){const n=document.querySelector(e);n instanceof HTMLElement&&(n.hidden=t)}a(c,"toggleVisibility");let q=null;async function U(){const e=document.querySelector(".js-seats");if(!e)return;const t=new URL(e.getAttribute("data-url"),window.location.origin),n=new URLSearchParams(t.search.slice(1));n.append("seats",m().toString()),t.search=n.toString(),q==null||q.abort();const{signal:o}=q=new AbortController;let s=null;try{const l=await fetch(t.toString(),{signal:o,headers:{Accept:"application/json"}});l.ok&&(s=await l.json())}catch(l){}if(o.aborted||!s)return;const r=s.new_price,i=e.getAttribute("data-original-price");if(i&&r===i){c(".js-plan-no-change",!0);return}M();const d=s.selectors;for(const l in d)for(const I of document.querySelectorAll(l))I.innerHTML=d[l];c(".js-plan-no-change",!0),c(".js-plan-changes",!1),c(".js-complete-button",!0),c(".js-invite-button",!1)}a(U,"updateTotals");function M(){const e=document.querySelector(".js-new-seats"),t=document.querySelector(".js-new-users-singular"),n=document.querySelector(".js-new-users-plural"),o=p();t.hidden=o!==1,n.hidden=o===1,e.textContent=String(o)}a(M,"updateNewSeatsText");function p(){return document.querySelectorAll(".js-badge").length||0}a(p,"invitesCount");function S(){const e=document.querySelector(".js-seats");if(!e)return 0;const t=e.getAttribute("data-total-seats");return parseInt(t)}a(S,"totalSeats");function w(){return S()===m()}a(w,"maxSeatsUsed");function H(){const e=m();return S()<e}a(H,"overMaxSeats");function B(e){const t=e.target;j(t)}a(B,"instrumentAdd");function k(e){j(e)}a(k,"instrumentRemove")}}});
//# sourceMappingURL=chunk-invitations-34f25477.js.map
