System.register(["./chunk-vendor.js","./chunk-query.js","./chunk-copy.js","./chunk-frameworks.js","./chunk-color-modes.js"],function(){"use strict";var a,y,De,Y,b,Z,p,E,M,je,m,k,w,Le,ue,Oe,Me,ke,Ae,ee,he,de;return{setters:[function(c){a=c.j,y=c.c,De=c.b,Y=c.k,b=c.t,Z=c.$,p=c.a0,E=c.l,M=c.ad,je=c.o},function(c){m=c.C,k=c.Q},function(c){w=c.c},function(c){Le=c.t,ue=c.aF,Oe=c.aG,Me=c.aH,ke=c.c,Ae=c.P},function(c){ee=c.s,he=c.a,de=c.g}],execute:function(){var c=Object.defineProperty,zt=Object.getOwnPropertyDescriptor,Jt=(e,t)=>c(e,"name",{value:t,configurable:!0}),te=(e,t,s,i)=>{for(var r=i>1?void 0:i?zt(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&c(t,s,r),r};const qe="*";let A=class extends HTMLElement{constructor(){super(...arguments);this.scopeTypes=""}active(e,t){return this.scopeTypeMatch(e.type)&&this.modeMatch(t)}scopeTypeMatch(e){return this.scopeTypes?this.scopeTypes&&JSON.parse(this.scopeTypes).includes(e):!0}modeMatch(e){return this.char===qe||this.char===e}character(){return this.char===qe?"":this.char}};Jt(A,"CommandPaletteModeElement"),te([a],A.prototype,"char",2),te([a],A.prototype,"placeholder",2),te([a],A.prototype,"scopeTypes",2),A=te([y],A);var He=Object.defineProperty,Xt=Object.getOwnPropertyDescriptor,Vt=(e,t)=>He(e,"name",{value:t,configurable:!0}),$=(e,t,s,i)=>{for(var r=i>1?void 0:i?Xt(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&He(t,s,r),r};const q="*",Be="";let I=class extends HTMLElement{constructor(){super(...arguments);this.type=q,this.mode=q,this.matchMode=Be,this.value=q,this.onEmpty=!1,this.onError=!1}connectedCallback(){this.hidden=!0}toggle(e,t=!1,s=!1){const i=this.valueMatch(e.text)&&this.scopeTypeMatch(e.scope.type)&&this.modeMatch(e.mode)&&this.showOnEmpty(t)&&this.showOnError(s);this.hidden=!i}valueMatch(e){return this.value===q||this.value===e}scopeTypeMatch(e){return this.type===q||this.type===e}modeMatch(e){if(this.matchMode===Be)return this.mode===q||this.mode===e;{const t=new RegExp(this.matchMode);return e.match(t)!==null}}showOnEmpty(e){return this.onEmpty?e:!0}showOnError(e){return this.onError?e:!0}};Vt(I,"CommandPaletteTipElement"),$([a],I.prototype,"type",2),$([a],I.prototype,"mode",2),$([a],I.prototype,"matchMode",2),$([a],I.prototype,"value",2),$([a],I.prototype,"onEmpty",2),$([a],I.prototype,"onError",2),I=$([y],I);var Fe=Object.defineProperty,Yt=Object.getOwnPropertyDescriptor,Zt=(e,t)=>Fe(e,"name",{value:t,configurable:!0}),W=(e,t,s,i)=>{for(var r=i>1?void 0:i?Yt(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&Fe(t,s,r),r};let D=class extends HTMLElement{constructor(){super(...arguments);this.type="",this.id="",this.text="",this.value=""}};Zt(D,"CommandPaletteTokenElement"),W([a],D.prototype,"type",2),W([a],D.prototype,"id",2),W([a],D.prototype,"text",2),W([a],D.prototype,"value",2),D=W([y],D);var Re=Object.defineProperty,es=Object.getOwnPropertyDescriptor,ts=(e,t)=>Re(e,"name",{value:t,configurable:!0}),G=(e,t,s,i)=>{for(var r=i>1?void 0:i?es(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&Re(t,s,r),r};let j=class extends HTMLElement{constructor(){super(...arguments);this.topGroupThreshold=6.5,this.maxHeightVh=65,this.showDebugInfo=!1,this.octicons={},this.tryDefaultSelection=!1,this.eventListenersBound=!1,this.currentHeight=0,this.items={},this.history={}}connectedCallback(){this.classList.add("rounded-bottom-2")}get selectedItem(){return this.findSelectedElement()}set selectedItem(e){const t=this.findSelectedElement();t&&(t.selected=!1),e&&(e.selected=!0,this.selectedItemChanged(e.item))}get selectedItemIsTopResult(){var e;const t=this.findGroup(m.topGroupId);return t&&t.itemNodes.length>0?t.firstItem.itemId===((e=this.selectedItem)==null?void 0:e.itemId):!1}findSelectedElement(){return this.querySelector('command-palette-item[data-selected="true"]')}navigate(e){var t,s;this.tryDefaultSelection=!1;const i=e>0,r={behavior:"smooth",block:"nearest"};if(this.selectedItem){let n;if(i?n=(t=this.selectedItem)==null?void 0:t.nextElementSibling:n=(s=this.selectedItem)==null?void 0:s.previousElementSibling,n)this.selectedItem=n,this.selectedItem.scrollIntoView(r);else if(this.selectedItem){const o=this.visibleGroups[this.calculateIndex(e)];o.scrollIntoView(r),i?this.selectedItem=o.firstItem:this.selectedItem=o.lastItem}}else this.selectedItem=this.firstItem}calculateIndex(e){var t;let s=this.visibleGroups.findIndex(n=>{var o;return n.groupId===((o=this.selectedItem)==null?void 0:o.item.group)});((t=this.findGroup(m.topGroupId))==null?void 0:t.firstItem)===this.selectedItem&&(s=0);const i=s+e,r=this.visibleGroups.length;return(i%r+r)%r}historyItems(e){return this.history[e]||(this.history[e]={}),this.history[e]}addItemToHistory(e,t,s){const i=this.historyItems(t),r=s.calculateScore(e);i[s.id]=r}addItems(e,t,s=!1){for(const i of t)this.addItemToHistory(e.text,e.path,i),this.items[i.id]=i,s&&this.prefillHistory(i,e);Y(this.renderCurrentItems.bind(this),this.debounceWait)()}removeItem(e){return delete this.items[e.id]}removeItems(e){const t=e.map(s=>({item:s,removed:this.removeItem(s)}));return Y(this.renderCurrentItems.bind(this),this.debounceWait)(),t}prefillHistory(e,t){for(const s of e.matchFields){const i=15,r=Math.min(s.length,i);for(let n=0;n<=r;n++){const o=s.slice(0,n);this.addItemToHistory(o,t.buildPath(t,o),e)}}}get debounceWait(){return 16}renderCurrentItems(){const e=this.getQuery().immutableCopy();this.currentPath!==e.path&&this.reset();const t=[...this.currentItems];if(e.isPresent()&&t.length>0){const s=this.findGroup(m.topGroupId);for(let i=0;s&&i<s.limit;i++){const r=t[i],n=r.calculateScore(e.queryText),o=r.priority+n;r&&o>this.topGroupThreshold&&this.renderItem(t.shift(),m.topGroupId)}}this.renderItems(t),this.updateSelectedItem(),this.itemsUpdated()}itemsUpdated(){const e=new CustomEvent("itemsUpdated",{cancelable:!0,detail:{items:this.currentItems,queryPath:this.getQuery().immutableCopy().path}});return this.dispatchEvent(e)}selectedItemChanged(e){const t=new CustomEvent("selectedItemChanged",{bubbles:!0,cancelable:!0,detail:{item:e,isDefaultSelection:this.tryDefaultSelection}});return this.dispatchEvent(t)}renderItems(e){for(const t of e)this.renderItem(t,t.group);this.setGroupBorders(),this.setMaxHeight()}get maximumHeight(){const e=475,t=50,s=window.innerHeight*(t/100);return Math.min(s,e)}get innerContentHeight(){let e=0;for(const t of this.children){const s=t,i=getComputedStyle(s),r=parseInt(i.marginTop.replace("px",""),10),n=parseInt(i.marginBottom.replace("px",""),10),o=s.offsetHeight+r+n;s.offsetHeight>0&&(e+=o)}return e}setMaxHeight(){const e=.6,t=this.maximumHeight*e,s=Math.round(Math.min(this.maximumHeight,this.innerContentHeight));Math.abs(this.currentHeight-s)>t?this.classList.add("no-transition"):this.classList.remove("no-transition"),this.setAttribute("style",`max-height:${s}px; min-height:${s}px;`),this.currentHeight=s}setGroupBorders(){if(this.visibleGroups.length>0){this.visibleGroups[0].classList.remove("border-top");for(const e of this.visibleGroups)this.visibleGroups.indexOf(e)===0?(e.classList.remove("border-top"),e.header&&(e.classList.remove("py-2"),e.classList.add("mb-2","mt-3"))):(e.classList.add("border-top"),e.header&&(e.classList.remove("mb-2","mt-3"),e.classList.add("py-2")))}}renderItem(e,t){var s;const i=this.findGroup(t);if(!i||(i.hasItem(e)||i.atLimit||((s=this.topGroup)==null?void 0:s.hasItem(e)))&&!(i==null?void 0:i.topGroup))return;const r=e.render(!1,this.getQuery().immutableCopy().queryText);if(this.showDebugInfo&&(r.score=e.score),i.push(r),r.containerElement){const o=i.list.children.length.toString();e.position=o}if(e.icon)if(e.icon.type==="octicon"){const o=this.octicons[e.icon.id],l=this.octicons["dash-color-fg-muted"];r.renderOcticon(o||l)}else e.icon.type==="avatar"&&r.renderAvatar(e.icon.url,e.icon.alt);else r.iconElement.hidden=!0;r.addEventListener("mousemove",o=>{(o.movementX!==0||o.movementY!==0)&&this.selectedItem!==r&&(this.tryDefaultSelection=!1,this.selectedItem=r)})}findGroup(e){return this.groups.find(t=>t.groupId===e)}get topGroup(){return this.findGroup(m.topGroupId)}get groupIds(){return this.groups.map(e=>e.groupId)}updateSelectedItem(){this.isSelectedItemInvalid()&&this.clearSelection(),this.setDefaultSelection()&&(this.selectedItem=this.firstItem)}setDefaultSelection(){const e=this.getQuery().hasScope()||this.getQuery().isPresent();return this.tryDefaultSelection&&e}noItemSelected(){return!this.selectedItem||this.isSelectedItemInvalid()}isSelectedItemInvalid(){return!this.currentItems.some(e=>{var t;return e.id===((t=this.selectedItem)==null?void 0:t.itemId)})}isEmpty(){return!this.currentItems||this.currentItems.length===0}clearSelection(){this.selectedItem=void 0}clear(){this.history={},this.items={},this.reset()}reset(){this.tryDefaultSelection=!0,this.currentPath=this.getQuery().immutableCopy().path;for(const e of this.groups)e.prepareForNewItems()}clearItemsFor(e){const t=this.groups.filter(i=>e.includes(i.groupId));for(const i of t)i.prepareForNewItems();const s=Object.values(this.items).filter(i=>e.includes(i.group));this.removeItems(s)}get visibleGroups(){return this.groups.filter(e=>!e.hidden)}get firstItem(){const e=this.visibleGroups;if(e.length>0)return e[0].querySelector("command-palette-item")}get currentItems(){const e=this.getQuery().immutableCopy(),t=this.historyItems(e.path),s=Object.entries(t).map(([i,r])=>{const n=this.items[i];return n?(n.score=r,n):(delete t[i],null)}).filter(i=>i!==null);return s?e.isBlank()?s.sort((i,r)=>r.priority-i.priority):s.sort((i,r)=>r.score-i.score||r.priority-i.priority):[]}disconnectedCallback(){this.unbindListeners()}bindListeners(){this.eventListenersBound||(window.addEventListener("resize",this.setMaxHeight.bind(this)),this.eventListenersBound=!0)}unbindListeners(){window.removeEventListener("resize",this.setMaxHeight.bind(this)),this.eventListenersBound=!1}};ts(j,"CommandPaletteItemStackElement"),G([a],j.prototype,"topGroupThreshold",2),G([a],j.prototype,"maxHeightVh",2),G([a],j.prototype,"showDebugInfo",2),G([De],j.prototype,"groups",2),j=G([y],j);var ss=Object.defineProperty,rs=(e,t)=>ss(e,"name",{value:t,configurable:!0});class pe extends HTMLElement{async fetchWithDebounce(t,s){return this._lastFetchQuery=t,await this.delay(this.provider.debounce),this._lastFetchQuery!==t?{results:[]}:this.provider.fetch(t,s)}delay(t){return new Promise(s=>setTimeout(s,t))}}rs(pe,"ProviderElement");var We=Object.defineProperty,is=Object.getOwnPropertyDescriptor,ns=(e,t)=>We(e,"name",{value:t,configurable:!0}),Ge=(e,t,s,i)=>{for(var r=i>1?void 0:i?is(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&We(t,s,r),r};let H=class extends pe{static build(e,t){const s=new H;return s.providerId=e,s.provider=t,s}};ns(H,"ClientDefinedProviderElement"),Ge([a],H.prototype,"providerId",2),H=Ge([y],H);var os=Object.defineProperty,me=(e,t)=>os(e,"name",{value:t,configurable:!0});function Ne(){return typeof Window=="undefined"}me(Ne,"withinWebWorker");class Ue{constructor(t,s=window){this.replyListeners={},this.routes={},this.receiver=t,this.sender=s,this.sender.onmessage=this.receive.bind(this)}addListener(t,s){this.routes[t]=s}respond(t,s){this.postMessage({id:t,type:"response",payload:s})}isReceiverWebWorker(){return this.receiver instanceof Worker}postMessage(t){Ne()?self.postMessage(t):this.isReceiverWebWorker()?this.receiver.postMessage(t):this.receiver.postMessage(t,"*")}async listenForReply(t){let s=me(()=>{},"resolveOutside");const i=new Promise(r=>{s=r});return this.replyListeners[t]=s,i}generateId(t){const s=new Date().getTime().toString(),i=Math.random().toString();return`${t}-${s}-${i}`}async post(t,s){const i=this.generateId(t);return this.postMessage({id:i,type:t,payload:s}),this.listenForReply(i)}async receive(t){const{id:s,type:i}=t.data;i==="response"?this.replyListeners[s](t.data):this.routes[i]&&this.routes[i](t.data)}forward(t,...s){for(const i of s)this.addListener(i,async r=>{const n=await t.post(i,r.payload);this.respond(r.id,n.payload)})}}me(Ue,"Switchboard");var as=Object.defineProperty,cs=(e,t)=>as(e,"name",{value:t,configurable:!0});class se extends Ue{static setup(){const t=document.querySelector("iframe.js-command-palette-commands"),s=new se(t.contentWindow);return s.originUrl=t.getAttribute("data-url"),s.addListener("graphql",async i=>{const r=i.payload,n=await s.fetchGraphql(r.query,r.variables);s.respond(i.id,n)}),s.addListener("flash",i=>{const r=i.payload;s.displayFlash(r.type,r.message)}),s.addListener("confirm",i=>{const r=i.payload;s.respond(i.id,window.confirm(r.message))}),s.addListener("navigate",i=>{const r=i.payload;s.openLink(r.path,r.options)}),s.addListener("copyToClipboard",async i=>{const r=i.payload;try{await w(r.text),s.respond(i.id,!0)}catch(n){s.respond(i.id,!1)}}),s}async receive(t){if(!(t.origin!==this.originUrl||!this.originUrl))return super.receive(t)}openLink(t,s){if(this.parseHref(t).origin!==window.origin)this.displayFlash("error",`You can only navigate within ${window.origin}.`);else if(s==null?void 0:s.openInNewTab){const r=document.createElement("a");r.href=t,r.target="_blank",r.click()}else window.location.href=t}parseHref(t){try{return new URL(t,void 0)}catch(s){return new URL(t,window.origin)}}async runCommand(t){return this.post("runCommand",t)}async fetchGraphql(t,s){const i=new URL("/command_palette/graphql",window.origin),r=document.querySelector(".js-graphql-csrf").value;return(await fetch(i.toString(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","Scoped-CSRF-Token":r},body:JSON.stringify({query:t,variables:s})})).json()}}cs(se,"PaletteToRunnerSwitchboard");var Ke=Object.defineProperty,ls=Object.getOwnPropertyDescriptor,Qe=(e,t)=>Ke(e,"name",{value:t,configurable:!0}),v=(e,t,s,i)=>{for(var r=i>1?void 0:i?ls(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&Ke(t,s,r),r};let d=class extends HTMLElement{constructor(){super(...arguments);this.titleNodes=[],this.rendered=!1,this.newTabOpened=!1,this.containerDataTarget="command-palette-item.containerElement",this.containerClasses="mx-2 px-2 rounded-2 d-flex flex-items-start no-underline border-0",this.containerStyle="padding-top: 10px; padding-bottom: 10px; cursor: pointer;"}renderOcticon(e){this.iconElement.innerHTML=e}renderAvatar(e,t){Z(this.item.getAvatarTemplate(e,t),this.iconElement)}setItemAttributes(e){this.item=e,this.itemId=e.id,this.itemTitle=e.title,this.hint=e.hint,this.href=e.path,e.subtitle&&(this.subtitle=e.subtitle)}connectedCallback(){this.subtitle&&this.subtitleElement.removeAttribute("hidden"),this.titleNodes.length>0&&(this.titleElement.textContent="",this.titleElement.append(...this.titleNodes)),this.containerElement.addEventListener("click",e=>{this.item.activate(this.commandPalette,e)})}get commandPalette(){return this.closest("command-palette")}attributeChangedCallback(e,t,s){this.rendered&&(e==="data-selected"?(this.setSelectionAppearance(),this.item.select(this)):e==="data-item-title"?this.titleElement.textContent=s:e==="data-subtitle"&&(this.subtitleElement.textContent=s))}setSelectionAppearance(){this.selected?(this.containerElement.classList.add("color-bg-subtle"),this.hintText.hidden=!1):(this.containerElement.classList.remove("color-bg-subtle"),this.hintText.hidden=!0)}renderLinkContainer(e){return p`
      <a
        data-target="${this.containerDataTarget}"
        href="${this.href}"
        class="${this.containerClasses}"
        data-skip-pjax
        style="${this.containerStyle}"
      >
        ${e}
      </a>
    `}renderSpanContainer(e){return p`
      <span data-target="${this.containerDataTarget}" class="${this.containerClasses}" style="${this.containerStyle}">
        ${e}
      </span>
    `}renderElementContent(){return p`
      <div
        data-target="command-palette-item.iconElement"
        class="mr-2 color-fg-muted d-flex flex-items-center"
        style="height: 24px;"
      ></div>

      <div class="flex-1 d-flex flex-column" style="line-height: 24px;">
        <span data-target="command-palette-item.titleElement" class="color-fg-default f5">${this.itemTitle}</span>
        <p data-target="command-palette-item.subtitleElement" class="color-fg-muted f6 mb-0" hidden>${this.subtitle}</p>
      </div>

      <div class="color-fg-muted f5" style="line-height: 20px;">
        <span class="hide-sm" data-target="command-palette-item.hintText" style="line-height: 24px;" hidden
          >${this.item.getHint()}</span
        >
        <span
          class="hide-sm"
          data-target="command-palette-item.persistentHint"
          style="line-height: 24px;"
          hidden
        ></span>
      </div>
    `}renderElement(){const e=this.renderElementContent();Z(Qe(()=>this.href?this.renderLinkContainer(e):this.renderSpanContainer(e),"itemTemplate")(),this),this.rendered=!0}activateLinkBehavior(e,t,s){const i=this.containerElement;s&&i instanceof HTMLAnchorElement?(this.newTabOpened=!0,this.openLinkInNewTab(i)):(this.newTabOpened=!1,this.openLink(i))}openLinkInNewTab(e){const t=e.getAttribute("target");e.setAttribute("target","_blank"),e.click(),t?e.setAttribute("target",t):e.removeAttribute("target")}openLink(e){e.click()}copyToClipboardAndAnnounce(e,t){w(e);const s=this.hintText,i=s.textContent;s.classList.add("color-fg-success"),s.textContent=t!=null?t:"Copied!",setTimeout(()=>{s.classList.remove("color-fg-success"),s.textContent=i},2e3)}getHint(){return this.hint?p`<span class="hide-sm">${this.hint}</span>`:this.item.scope?p`<div class="hide-sm">
        <kbd class="hx_kbd">Enter</kbd>
        to jump to
        <kbd class="hx_kbd ml-1">Tab</kbd>
        to search
      </div>`:p`<span class="hide-sm">Jump to</span>`}};Qe(d,"CommandPaletteItemElement"),v([a],d.prototype,"itemId",2),v([a],d.prototype,"itemTitle",2),v([a],d.prototype,"subtitle",2),v([a],d.prototype,"selected",2),v([a],d.prototype,"score",2),v([b],d.prototype,"titleElement",2),v([b],d.prototype,"iconElement",2),v([b],d.prototype,"subtitleElement",2),v([b],d.prototype,"hintText",2),v([b],d.prototype,"persistentHint",2),v([b],d.prototype,"containerElement",2),d=v([y],d);var us=function(){for(var e=new Uint32Array(256),t=256;t--;){for(var s=t,i=8;i--;)s=s&1?3988292384^s>>>1:s>>>1;e[t]=s}return function(r){var n=-1;typeof r=="string"&&(r=function(h){for(var Kt=h.length,Qt=new Array(Kt),$e=-1;++$e<Kt;)Qt[$e]=h.charCodeAt($e);return Qt}(r));for(var o=0,l=r.length;o<l;o++)n=n>>>8^e[n&255^r[o]];return(n^-1)>>>0}}(),hs=function(e){return e<0&&(e=4294967295+e+1),("0000000"+e.toString(16)).slice(-8)},ze=function(e,t){var s=us(e);return t?hs(s):s},ds=Object.defineProperty,ps=(e,t)=>ds(e,"name",{value:t,configurable:!0});function N(e,t){const s=document.querySelector("command-palette"),i={command_palette_session_id:s.sessionId,command_palette_scope:s.query.scope.type,command_palette_mode:s.getMode(),command_palette_title:(t==null?void 0:t.group)==="commands"?t.title:"",command_palette_position:t==null?void 0:t.position,command_palette_score:t==null?void 0:t.score,command_palette_group:t==null?void 0:t.group,command_palette_item_type:t==null?void 0:t.itemType};Le(`command_palette_${e}`,i)}ps(N,"sendTrackingEvent");var ms=Object.defineProperty,Je=(e,t)=>ms(e,"name",{value:t,configurable:!0});function _(e){g.register(e)}Je(_,"item");const Xe=class{constructor(e){this.position="",this.newTabOpened=!1;var t;this.title=e.title,this.priority=e.priority,this.score=e.score,this.subtitle=e.subtitle,this.typeahead=e.typeahead,this.scope=e.scope,this.hint=e.hint,this.icon=e.icon,this.group=(t=e.group)!=null?t:m.defaultGroupId,this.match_fields=e.match_fields,this._action=e.action}static register(e){this.itemClasses[e.itemType]=e}static get itemType(){return this.buildItemType(this.name)}static buildItemType(e){return e.replace(/([A-Z]($|[a-z]))/g,"_$1").replace(/(^_|_Item$)/g,"").toLowerCase()}static build(e){const t=this.itemClasses[e.action.type];if(t)return new t(e);throw new Error(`No item handler for ${e.action.type}`)}get action(){return this._action}get element(){return this._element||(this._element=new d,this._element.setItemAttributes(this)),this._element}getAvatarTemplate(e,t){return p`<img src="${e}" alt="${t}" class="avatar avatar-1 avatar-small circle" />`}getHint(){return this.element.getHint()}get key(){return`${this.action.type}/${this.title}/${this.group}`}get id(){return this._id||(this._id=ze(this.key).toString()),this._id}get path(){return this.action.path||""}get itemType(){return Xe.buildItemType(this.constructor.name)}select(e){}deselect(e){}activate(e,t){N(this.activateTrackingEventType,this)}get activateTrackingEventType(){return"activate"}activateLinkBehavior(e,t,s){this.element.activateLinkBehavior(e,t,s)}copy(e){N("copy",this)}render(e,t){return this.element.renderElement(),e&&(this.element.selected=!0),t&&(this.element.titleNodes=this.emphasizeTextMatchingQuery(this.title,t)),this.element}emphasizeTextMatchingQuery(e,t){if(!ue(t,e))return[document.createTextNode(e)];const s=[];let i=0;for(const n of Oe(t,e)){if(e.slice(i,n)!==""){const h=document.createTextNode(e.slice(i,n));s.push(h)}i=n+1;const l=document.createElement("strong");l.textContent=e[n],s.push(l)}const r=document.createTextNode(e.slice(i));return s.push(r),s}copyToClipboardAndAnnounce(e,t){this.element.copyToClipboardAndAnnounce(e,t)}calculateScore(e){const t=this.matchFields.map(s=>this.calculateScoreForField({field:s,queryText:e}));return Math.max(...t)}calculateScoreForField({field:e,queryText:t}){return ue(t,e)?Me(t,e):-1/0}get matchFields(){return this.match_fields?this.match_fields:[this.title]}autocomplete(e){const t=e.commandPaletteInput,s=this.typeahead;s!==void 0?t.value=t.overlay+s:t.value=t.overlay+this.title}};let g=Xe;Je(g,"Item"),g.itemClasses={},g.defaultData={title:"",score:1,priority:1,action:{type:"",path:""},icon:{type:"octicon",id:"dash-color-fg-muted"},group:m.defaultGroupId};var fs=Object.defineProperty,vs=(e,t)=>fs(e,"name",{value:t,configurable:!0});class Ve{fuzzyFilter(t,s,i=0){const r=[];for(const n of t)n.calculateScore(s.text)>i&&r.push(n);return r}}vs(Ve,"ProviderBase");var ys=Object.defineProperty,gs=(e,t)=>ys(e,"name",{value:t,configurable:!0});class U extends Ve{constructor(t){super();this.element=t}get type(){return this.element.type}get modes(){return this.element.modes}get debounce(){return this.element.debounce}get scopeTypes(){return this.element.scopeTypes}get src(){return this.element.src}get hasWildCard(){return this.element.hasWildCard}get hasCommands(){return this.element.hasCommands}fetch(t,s){throw new Error("Method not implemented.")}enabledFor(t){throw new Error("Method not implemented.")}clearCache(){throw new Error("Method not implemented.")}}gs(U,"ServerDefinedProvider");var bs=Object.defineProperty,_s=(e,t)=>bs(e,"name",{value:t,configurable:!0});class fe extends U{fetch(t,s){return this.fetchSrc(t)}enabledFor(t){return this.modeMatch(t)&&this.scopeMatch(t)}clearCache(){}scopeMatch(t){return this.scopeTypes.length===0||this.scopeTypes.includes(t.scope.type)}modeMatch(t){return this.modes.includes(t.mode)||this.hasWildCard}async fetchSrc(t,s=""){var i;if(!this.src)throw new Error("No src defined");const r=new URL(this.src,window.location.origin),n=t.params();s&&n.set("mode",s),r.search=n.toString();const o=await fetch(r.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(o.ok){const l=await o.json();return{results:((i=l.results)==null?void 0:i.map(h=>g.build(h)))||[],octicons:l.octicons}}else return{error:!0,results:[]}}}_s(fe,"RemoteProvider");var Ps=Object.defineProperty,Es=(e,t)=>Ps(e,"name",{value:t,configurable:!0});class re extends fe{constructor(){super(...arguments);this.maxItems=1e3,this.scopedItems={}}clearCache(){super.clearCache(),this.scopedItems={}}get debounce(){return 0}async prefetch(t){if(this.scopedItems[t.scope.id])return;const s=new k("",t.mode,{subjectId:t.subjectId,subjectType:t.subjectType,returnTo:t.returnTo,scope:t.scope}),i=await this.fetchSrc(s,t.mode);this.octicons=i.octicons||[];const r=i.results||[];this.scopedItems[t.scope.id]=r}async fetch(t,s){const i=this.scopedItems[t.scope.id]||[];return t.isBlank()?{results:i.slice(0,this.maxItems)}:{results:this.fuzzyFilter(i,t).slice(0,this.maxItems)}}}Es(re,"PrefetchedProvider");var ve=Object.defineProperty,Is=Object.getOwnPropertyDescriptor,Ye=Object.getOwnPropertySymbols,Cs=Object.prototype.hasOwnProperty,Ts=Object.prototype.propertyIsEnumerable,Ze=(e,t,s)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ie=(e,t)=>{for(var s in t||(t={}))Cs.call(t,s)&&Ze(e,s,t[s]);if(Ye)for(var s of Ye(t))Ts.call(t,s)&&Ze(e,s,t[s]);return e},ye=(e,t)=>ve(e,"name",{value:t,configurable:!0}),K=(e,t,s,i)=>{for(var r=i>1?void 0:i?Is(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&ve(t,s,r),r};const ge=ye(()=>navigator.platform.match(/Mac/),"isMac"),Ss=ge()?"metaKey":"ctrlKey",Q=ye(e=>e instanceof KeyboardEvent?e[Ss]:!1,"isPlatformMetaKey");let f=class extends HTMLElement{constructor(){super(...arguments);this.activated=!1,this.error=!1,this.query=new k("",""),this.requestsInProgress=[],this.setupComplete=!1,this.sessionId="",this.returnTo="",this.userId="",this.multiPageEnabled=!1}setup(){if(this.commandSwitchboard=se.setup(),this.commandSwitchboard.displayFlash=(e,t)=>{this.displayFlash(e,t)},this.modes=Array.from(this.querySelectorAll("command-palette-mode")),this.defaultMode=this.querySelector(".js-command-palette-default-mode"),this.commandPaletteInput=this.querySelector("command-palette-input"),this.groups=this.querySelectorAll("command-palette-item-group"),this.multiPageEnabled||(this.itemStackElement=this.querySelector("command-palette-item-stack"),this.itemStackElement.getQuery=()=>this.query,this.itemStackElement.addEventListener("itemsUpdated",this.itemsUpdated.bind(this))),this.addEventListener("selectedItemChanged",e=>{if(e instanceof CustomEvent){const t=e.detail.item,s=e.detail.isDefaultSelection;this.updateTypeahead(t,s)}}),this.octicons={},!this.multiPageEnabled){const e=this.querySelector(".js-command-local-provider-octicons");if(e){const t=Array.from(e.children).map(s=>({id:s.getAttribute("data-local-provider-octicon-id"),svg:s.innerHTML}));this.cacheIcons(t)}}this.commandPaletteInput.addEventListener("command-palette-input",this.onInput.bind(this)),this.commandPaletteInput.addEventListener("command-palette-select",this.onSelect.bind(this)),this.commandPaletteInput.addEventListener("command-palette-descope",this.onDescope.bind(this)),this.commandPaletteInput.addEventListener("command-palette-cleared",this.onInputClear.bind(this)),document.addEventListener("pjax:end",this.pjaxReset.bind(this)),this.addEventListener("keydown",this.onKeydown.bind(this)),this.defaultOpen&&(this.manualToggle(!0),this.clearReturnToParams()),this.setupComplete=!0}connectedCallback(){this.setupComplete||this.setup()}clear(e=!0){if(this.clearProviderCaches(),this.multiPageEnabled||this.itemStackElement.clear(),e&&this.resetInput(),this.activated)return this.prefetchProviderData()}clearCommands(e=!0){if(this.clearCommandProviderCaches(),this.multiPageEnabled||this.itemStackElement.clearItemsFor(m.commandGroupIds),e&&this.resetInput(),this.activated)return this.prefetchProviderData({providers:this.commandsProviderElements})}resetInput(){this.commandPaletteInput.value="",this.commandPaletteInput.resetScopeIfNeeded()}activate(){if(this.sessionId=this.generateSessionId(),this.commandPaletteInput.resetScopeIfNeeded(),this.commandPaletteInput.focus(),this.setActiveModeElement(),this.setQuery(),this.toggleTips(),this.prefetchProviderData(),this.updateOverlay(),this.multiPageEnabled)this.pageStack.currentPage.prefetch();else if(this.itemStackElement.bindListeners(),this.commandPaletteInput.hasScope()){const e=new k(this.query.queryText,this.query.queryMode,{subjectId:this.query.subjectId,subjectType:this.query.subjectType,returnTo:this.query.returnTo});this.prefetchProviderData({query:e})}this.activated=!0,N("session_initiated")}deactivate(){this.activated=!1,this.multiPageEnabled||(this.itemStackElement.clearSelection(),this.itemStackElement.unbindListeners()),this.previouslyActiveElement&&this.previouslyActiveElement.focus(),N("session_terminated")}generateSessionId(){return ze(`${Date.now()}_${this.userId}_${this.query.path}`).toString()}manualToggle(e){const t=this.closest("details");e?t.open=!0:t.removeAttribute("open")}dismiss(){this.manualToggle(!1)}get subjectId(){var e;return((e=this.pjaxMeta)==null?void 0:e.getAttribute("data-subject-id"))||""}get subjectType(){var e;return((e=this.pjaxMeta)==null?void 0:e.getAttribute("data-subject-type"))||""}get pjaxMeta(){return document.querySelector(".js-command-palette-pjax-meta-data")}pjaxReset(){this.activated=!1,this.clear(!0)}onInput(){this.commandPaletteInput.typeahead="",this.setActiveModeElement(),this.setQuery(),this.activated&&this.fetchProviderData(),this.multiPageEnabled||this.itemStackElement.updateSelectedItem(),this.toggleTips(),this.updateOverlay()}updateOverlay(){const e=this.getMode();this.commandPaletteInput.overlay=e;for(const t of this.groups)t.renderElement(e);if(e&&this.getTextWithoutMode()===""){const t=this.getModeElement().placeholder||"";this.commandPaletteInput.showModePlaceholder(t)}else this.commandPaletteInput.showModePlaceholder("")}itemsUpdated(e){if(!(e instanceof CustomEvent))return;const s=e.detail.items.filter(o=>o.group!==m.footerGroupId),i=s.filter(o=>!m.helpGroupIds.includes(o.group)),r=s.length>i.length,n=this.finishedLoading&&i.length===0&&this.activated;i.length>0?this.toggleEmptyState(!1,r):n&&(this.toggleEmptyState(!0,r),this.toggleTips()),this.toggleErrorTips()}setActiveModeElement(){const e=this.commandPaletteInput.value.substring(0,1),t=this.modes.filter(s=>s.active(this.query.scope,e)).find(s=>s.character()===e);this.activeMode=t||this.defaultMode,this.multiPageEnabled&&(this.pageStack.currentMode=this.activeMode.character())}setQuery(){this.query=new k(this.getTextWithoutMode().trimStart(),this.getMode(),{scope:this.commandPaletteInput.scope,subjectId:this.subjectId,subjectType:this.subjectType,returnTo:this.returnTo}),this.multiPageEnabled&&(this.pageStack.currentQueryText=this.getTextWithoutMode().trimStart())}getModeElement(){return this.activeMode}getMode(){return this.getModeElement().character()}getTextWithoutMode(){if(!this.commandPaletteInput)return"";const e=this.commandPaletteInput.value,t=this.getMode();return t&&e.startsWith(t)?e.substring(1):e}get selectedItem(){return this.multiPageEnabled?this.pageStack.currentPage.selectedItem:this.itemStackElement.selectedItem}onSelect(e){this.selectedItem?this.selectedItem.item.scope?this.setScope(this.selectedItem.item.scope):this.selectedItem.item.autocomplete(this):e.preventDefault()}setScope(e){if(this.multiPageEnabled){const t=e||this.commandPaletteInput.scope;for(const s of t.tokens){const i=s===t.tokens[t.tokens.length-1];this.pageStack.push({title:s.value,scopeId:s.id,scopeType:s.type,hidden:!i})}this.commandPaletteInput.value=""}else this.itemStackElement.clearSelection(),this.commandPaletteInput.value="",e&&(this.commandPaletteInput.scope=e),this.setQueryScope(),this.toggleTips(),this.prefetchProviderData()}onDescope(){if(this.multiPageEnabled){this.pageStack.pop();return}if(this.commandPaletteInput.hasScope()){const t=this.commandPaletteInput.value;this.commandPaletteInput.removeToken(),this.setScope(),this.commandPaletteInput.setRemovedTokenAndSelect(t)}}onInputClear(){this.commandPaletteInput.clearScope(),this.setScope()}onKeydown(e){var t;e.key==="Enter"&&this.selectedItem?((t=this.selectedItem)==null||t.item.activate(this,e),e.preventDefault(),e.stopPropagation()):e.key==="ArrowDown"?(this.navigateToItem(1),e.preventDefault(),e.stopPropagation()):e.key==="ArrowUp"?(this.navigateToItem(-1),e.preventDefault(),e.stopPropagation()):this.isCopyEvent(e)&&this.selectedItem&&(this.selectedItem.item.copy(this),e.preventDefault(),e.stopPropagation())}navigateToItem(e){this.multiPageEnabled?this.pageStack.navigate(e):this.itemStackElement.navigate(e)}toggleTips(){for(const e of this.modeTips)e.toggle(this.query);this.finishedLoading&&!this.multiPageEnabled&&this.itemStackElement.setMaxHeight()}toggleEmptyState(e,t){for(const s of this.emptyStateElements)s.toggle(this.query,e);if(!t&&e){const s=this.serverDefinedProviderElements.find(i=>i.type==="help");s&&this.fetchProviderData([s],{isEmpty:!0})}else t&&!e&&!this.multiPageEnabled&&this.itemStackElement.clearItemsFor(m.helpGroupIds);this.finishedLoading&&!this.multiPageEnabled&&this.itemStackElement.setMaxHeight()}toggleErrorTips(){for(const e of this.errorStateTips)e.toggle(this.query,!1,this.error)}updateTypeahead(e,t=!1){var s,i;this.getTextWithoutMode()===""&&(!e||t)?this.commandPaletteInput.typeahead="":e&&(this.commandPaletteInput.typeahead=(i=(s=e.typeahead)!=null?s:e.title)!=null?i:"")}isCopyEvent(e){return this.commandPaletteInput.textSelected()?!1:ge()?e.metaKey&&e.key==="c":e.ctrlKey&&e.key==="c"}setQueryScope(){this.query.scope=this.commandPaletteInput.scope}async prefetchProviderData(e={}){if(this.multiPageEnabled)return;const t={query:this.query,providers:this.providerElements},s=ie(ie({},t),e);await Promise.all(Array.from(s.providers).map(async i=>{const r=i.provider;if(r instanceof re){if(!r.scopeMatch(this.query))return;await r.prefetch(s.query.immutableCopy()),this.cacheIcons(r.octicons)}await this.fetchProviderData([i],{prefillItemStack:!0})}))}async fetchProviderData(e,t={}){if(this.multiPageEnabled)return;const i=ie(ie({},{prefillItemStack:!1,isEmpty:!1}),t),r=e!=null?e:this.providerElements;this.error=!1,await this.fetchWithSpinner(r.map(async n=>{if(!n.provider.enabledFor(this.query))return;const o=this.query.immutableCopy(),l=await n.fetchWithDebounce(o,i.isEmpty);l&&(l.error&&(this.error=!0,this.toggleErrorTips()),l.octicons&&this.cacheIcons(l.octicons)),this.multiPageEnabled||this.itemStackElement.addItems(o,l.results,i.prefillItemStack)}))}async fetchWithSpinner(e){this.requestsInProgress.push(e),this.commandPaletteInput.loading=!0,await Promise.all(e),this.requestsInProgress.splice(this.requestsInProgress.indexOf(e),1),this.commandPaletteInput.loading=this.requestsInProgress.length>0}get serverDefinedProviderElements(){const e=this.querySelectorAll("server-defined-provider");return Array.from(e)}get clientDefinedProviderElements(){const e=this.querySelectorAll("client-defined-provider");return Array.from(e)}get providerElements(){return[...this.serverDefinedProviderElements,...this.clientDefinedProviderElements]}get commandsProviderElements(){return this.providerElements.filter(e=>e.provider.hasCommands)}clearProviderCaches(){for(const e of this.providerElements)e.provider.clearCache()}clearCommandProviderCaches(){for(const e of this.commandsProviderElements)e.provider.clearCache()}registerProvider(e,t){const s=H.build(e,t);this.appendChild(s)}get tipElements(){const e=this.querySelectorAll("command-palette-tip");return Array.from(e)}get modeTips(){return this.tipElements.filter(e=>!e.onEmpty&&!e.onError)}get emptyStateElements(){return this.tipElements.filter(e=>e.onEmpty)}get errorStateTips(){return this.tipElements.filter(e=>e.onError)}get finishedLoading(){return this.requestsInProgress.length===0}get placeholder(){return this.getAttribute("placeholder")||""}get defaultOpen(){return this.getAttribute("data-default-open")!==null}clearReturnToParams(){const e=new URLSearchParams(location.search);e.delete("command_palette_open"),e.delete("command_query"),e.delete("command_mode"),e.delete("clear_command_scope"),history.replaceState(null,"",`?${e}${location.hash}`)}cacheIcons(e){if(!this.multiPageEnabled)for(const t of e)this.itemStackElement.octicons[t.id]=t.svg}async runCommand(e,t){const s={command:{name:e,id:t},context:{subject:{id:this.subjectId,type:this.subjectType}}};this.dismiss(),this.clearCommands(),await this.commandSwitchboard.runCommand(s)}displayFlash(e,t,s=!1,i=5e3){const r=document.querySelector(".js-command-palette-toasts");if(!r)return;const n=r.querySelectorAll(".Toast");for(const h of n)h.hidden=!0;const o=r.querySelector(`.Toast.Toast--${e}`);if(!o)return;const l=o.querySelector(".Toast-content");s?l.innerHTML=t:l.textContent=t,o.hidden=!1,setTimeout(()=>{o.hidden=!0},i)}};ye(f,"CommandPalette"),f.tagName="command-palette",K([a],f.prototype,"returnTo",2),K([a],f.prototype,"userId",2),K([a],f.prototype,"multiPageEnabled",2),K([b],f.prototype,"pageStack",2),f=K([y],f);var et=Object.defineProperty,ws=Object.getOwnPropertyDescriptor,xs=(e,t)=>et(e,"name",{value:t,configurable:!0}),$s=(e,t,s,i)=>{for(var r=i>1?void 0:i?ws(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&et(t,s,r),r};let ne=class extends g{render(e){return super.render(e,this.typeahead)}activate(e,t){t instanceof PointerEvent?super.activate(e,t):t instanceof KeyboardEvent&&this.activateLinkBehavior(e,t,Q(t))}get activateTrackingEventType(){return"access_policy_executed"}get key(){return this.title}getHint(){return p``}};xs(ne,"AccessPolicyItem"),ne=$s([_],ne);var tt=Object.defineProperty,Ds=Object.getOwnPropertyDescriptor,js=(e,t)=>tt(e,"name",{value:t,configurable:!0}),Ls=(e,t,s,i)=>{for(var r=i>1?void 0:i?Ds(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&tt(t,s,r),r};let P=class extends g{static from(e){return new P({title:e.title,typeahead:e.title,priority:1,score:1,group:e.group,action:{type:"jump_to",description:"",path:e.path},icon:{type:"octicon",id:e.icon}})}render(e,t){return super.render(e,t)}activate(e,t){t instanceof PointerEvent?super.activate(e,t):t instanceof KeyboardEvent&&this.activateLinkBehavior(e,t,Q(t))}get activateTrackingEventType(){return this.newTabOpened?"jump_to_new_tab":"jump_to"}copy(e){super.copy(e);const t=new URL(this.action.path,window.location.origin);this.copyToClipboardAndAnnounce(t.toString())}get key(){return`${super.key}/${this.action.path}`}get action(){return this._action}};js(P,"JumpToItem"),P=Ls([_],P);var Os=Object.defineProperty,Ms=(e,t)=>Os(e,"name",{value:t,configurable:!0});class st extends re{async fetchSrc(t){if(!this.src)throw new Error("No src provided");const s=new URL(this.src,window.location.origin);s.search=t.params().toString();const r=await(await fetch(s.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).json(),n=r.results[0];if(n.base_file_path){const o=n.base_file_path,l=n.paths;r.results=l.map(h=>P.from({title:h,path:`${o}/${h}`,icon:"file-color-fg-muted",group:"files"}))}else n.action&&n.action.type==="access_policy"?r.results=[new ne(n)]:r.results=[];return r}async fetch(t,s=!1){const i=t.text.match(/(.+):(\d*)\s*$/);return i?this.fetchWithLineNumbers(t,i):super.fetch(t,s)}async fetchWithLineNumbers(t,s){const i=s[1],r=s[2],n=new k(i,t.mode,{scope:t.scope}),o=[],l=(await super.fetch(n,!1)).results;for(const h of l)h instanceof P&&o.push(this.convert(h,r));return{results:o}}convert(t,s){return s===""||!(t instanceof P)||(t.title=`${t.title}:${s}`,t.action.path=`${t.action.path}#L${s}`),t}}Ms(st,"FilesProvider");var ks=Object.defineProperty,As=(e,t)=>ks(e,"name",{value:t,configurable:!0});class rt extends U{enabledFor(t){return!0}clearCache(){}get hasCommands(){return!1}get debounce(){return 0}async fetch(t,s=!1){return t.mode==="?"||s?{results:Array.from(this.element.querySelectorAll("command-palette-help")).filter(n=>n.show(t)).map((n,o)=>n.toItem(o))}:{results:[]}}}As(rt,"HelpProvider");var it=Object.defineProperty,qs=Object.getOwnPropertyDescriptor,Hs=(e,t)=>it(e,"name",{value:t,configurable:!0}),Bs=(e,t,s,i)=>{for(var r=i>1?void 0:i?qs(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&it(t,s,r),r};let z=class extends g{constructor(e){super(e)}static from(e){return new z({title:e.title,subtitle:e.subtitle,typeahead:e.title,priority:11,score:1,group:"commands",action:{type:"main_window_command",command:e,path:""},icon:{type:"octicon",id:e.icon},hint:"Run command"})}activate(e){super.activate(e),this.action.command.run(e),e.clearProviderCaches(),e.dismiss(),e.itemStackElement.clear(),e.commandPaletteInput.value=""}get activateTrackingEventType(){return"command_executed"}isApplicable(e){return this.action.command.isApplicable(e)}select(){this.action.command.select()}deselect(){this.action.command.deselect()}get action(){return this._action}};Hs(z,"MainWindowCommandItem"),z=Bs([_],z);var Fs=Object.defineProperty,Rs=(e,t)=>Fs(e,"name",{value:t,configurable:!0});class u{static get item(){return z.from(new this)}run(t){}isApplicable(t){return!0}select(){}deselect(){}}Rs(u,"MainWindowCommand");var Ws=Object.defineProperty,oe=(e,t)=>Ws(e,"name",{value:t,configurable:!0});class nt extends u{constructor(){super(...arguments);this.title="Delete discussion\u2026",this.icon="trash-color-fg-muted"}fetchDetails(){return document.querySelector("details.js-delete-discussion-details")}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}run(){const t=this.fetchDetails();t&&(t.open=!0,setTimeout(()=>{var s;(s=t==null?void 0:t.querySelector('button[type="submit"]'))==null||s.focus()},0))}}oe(nt,"DeleteDiscussion");class ot extends u{constructor(){super(...arguments);this.title="Edit discussion body",this.icon="pencil-color-fg-muted"}get editButton(){return document.querySelector(".js-discussions-comment-edit-button")}isApplicable(){return this.editButton!=null}run(){var t;(t=this.editButton)==null||t.click()}}oe(ot,"EditDiscussion");class at extends u{constructor(){super(...arguments);this.title="Transfer discussion\u2026",this.icon="arrow-right-color-fg-muted"}fetchDetails(){return document.querySelector("details.js-transfer-discussion-details")}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}run(){var t;const s=this.fetchDetails();if(s){const i=oe(()=>{setTimeout(()=>{var r;(r=s==null?void 0:s.querySelector("[data-menu-button]"))==null||r.focus()},0)},"focusMenu");(t=s.querySelector("include-fragment"))==null||t.addEventListener("load",i),s.open=!0,i()}}}oe(at,"TransferDiscussion");var Gs=[nt,at,ot],Ns=Object.defineProperty,L=(e,t)=>Ns(e,"name",{value:t,configurable:!0});class ct extends u{constructor(){super(...arguments);this.title="Open in github.dev editor",this.icon="codespaces-color-fg-muted"}isApplicable(){return this.fetchLink()instanceof HTMLAnchorElement}fetchLink(){return document.querySelector(".js-github-dev-shortcut")}run(){var t;(t=this.fetchLink())==null||t.click()}}L(ct,"OpenInDotDev");class B extends u{constructor(){super(...arguments);this.title="Switch theme to default dark",this.icon="moon-color-fg-muted",this.mode="dark",this.theme="dark"}select(){this.loadStyles(this.theme)}applyTheme(){this.loadStyles(this.theme),this.mode!=="auto"&&ee(this.theme,this.mode),he(this.mode)}async run(){this.applyTheme(),this.saveSettings(this.mode,this.lightTheme,this.darkTheme)}async saveSettings(t=this.mode,s,i){const r=document.querySelector(".js-color-mode-csrf").value,n=document.querySelector(".js-color-mode-path").value,o=new FormData;o.set("color_mode",t),s&&o.set("light_theme",s),i&&o.set("dark_theme",i);const h=await(await fetch(n,{method:"PUT",body:o,mode:"same-origin",headers:{"Scoped-CSRF-Token":r,"X-Requested-With":"XMLHttpRequest"}})).json();this.loadStyles(h.light_theme),this.loadStyles(h.dark_theme),ee(h.light_theme,"light"),ee(h.dark_theme,"dark"),he(h.color_mode)}loadStyles(t){const s=document.querySelector(`link[data-color-theme='${t}']`);s&&!s.hasAttribute("href")&&s.hasAttribute("data-href")&&s.setAttribute("href",s.getAttribute("data-href"))}get darkTheme(){return this.mode==="dark"?this.theme:de("dark")}get lightTheme(){return this.mode==="light"?this.theme:de("light")}}L(B,"SwitchToDark");class lt extends B{constructor(){super(...arguments);this.title="Switch theme to dark high contrast",this.theme="dark_high_contrast"}}L(lt,"SwitchToDarkHighConstrast");class ut extends B{constructor(){super(...arguments);this.title="Switch theme to dark dimmed",this.theme="dark_dimmed"}}L(ut,"SwitchToDarkDimmed");class ht extends B{constructor(){super(...arguments);this.title="Switch theme to default light",this.icon="sun-color-fg-muted",this.mode="light",this.theme="light"}}L(ht,"SwitchToLight");class dt extends B{constructor(){super(...arguments);this.title="Switch theme settings to sync with system",this.icon="sun-color-fg-muted",this.mode="auto"}get darkTheme(){}get lightTheme(){}}L(dt,"SwitchToAuto");class pt extends u{constructor(){super();const t=this.isSubscribe();this.title=`${t?"Subscribe":"Unsubscribe"}`,this.icon=`${t?"bell":"bell-slash"}-color-fg-muted`}isApplicable(){var t;return this.fetchButton()instanceof HTMLButtonElement&&((t=this.fetchButton())==null?void 0:t.disabled)===!1}isSubscribe(){var t,s;return((s=(t=this.fetchButton())==null?void 0:t.textContent)==null?void 0:s.trim())==="Subscribe"}fetchButton(){return document.querySelector(".thread-subscribe-button")}run(){var t;(t=this.fetchButton())==null||t.click()}}L(pt,"UpdateSubscription");var Us=[ct,ht,B,ut,lt,dt,pt],Ks=Object.defineProperty,C=(e,t)=>Ks(e,"name",{value:t,configurable:!0});function be(e){e.focus(),e.selectionStart=e.selectionEnd=e.value.length}C(be,"moveCursorToEnd");class _e extends u{constructor(){super(...arguments);this.title="Edit issue body",this.icon="pencil-color-fg-muted"}run(){const t=document.createElement("button");t.hidden=!0,t.classList.add("js-comment-edit-button");const s=document.querySelector("div.js-comment");s==null||s.appendChild(t),t.click(),t.remove(),setTimeout(()=>{var i;const r=(i=s==null?void 0:s.parentElement)==null?void 0:i.querySelector("textarea.js-comment-field");r&&be(r)},0)}}C(_e,"EditIssueBody");class Pe extends u{constructor(){super(...arguments);this.title="Edit issue title",this.icon="pencil-color-fg-muted"}isApplicable(){return this.fetchButton()instanceof HTMLButtonElement}fetchButton(){return document.querySelector(".js-title-edit-button")}run(){var t;(t=this.fetchButton())==null||t.click(),setTimeout(()=>{const s=document.querySelector("input#issue_title[autofocus]");s&&be(s)},0)}}C(Pe,"EditIssueTitle");class mt extends u{constructor(){super(...arguments);this.title="Transfer issue\u2026",this.icon="arrow-right-color-fg-muted"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}fetchDetails(){return document.querySelector("details.js-transfer-issue")}run(){var t;const s=this.fetchDetails();if(s){const i=C(()=>{setTimeout(()=>{var r;(r=s.querySelector("[data-menu-button]"))==null||r.focus()},0)},"focusMenu");(t=s.querySelector("include-fragment"))==null||t.addEventListener("load",i),s.open=!0,i()}}}C(mt,"TransferIssue");class ft extends u{constructor(){super();const t=this.isLock();this.title=`${t?"Lock":"Unlock"} issue`,this.icon=`${t?"lock":"key"}-color-fg-muted`}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}isLock(){var t,s;return((s=(t=document.querySelector("summary.lock-toggle-link"))==null?void 0:t.textContent)==null?void 0:s.trim())==="Lock conversation"}fetchDetails(){return document.querySelector("details.js-lock-issue")}run(){const t=this.fetchDetails();t&&(t.open=!0,setTimeout(()=>{var s;(s=document.querySelector("#unlock-reason"))==null||s.focus()},0))}}C(ft,"LockIssue");class vt extends u{constructor(){super(...arguments);this.title="Delete issue\u2026",this.icon="trash-color-fg-muted"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}fetchDetails(){return document.querySelector("details.js-delete-issue")}run(){const t=this.fetchDetails();t&&(t.open=!0,setTimeout(()=>{var s;(s=t.querySelector('button[type="submit"]'))==null||s.focus()},0))}}C(vt,"DeleteIssue");class yt extends u{constructor(){super(...arguments);this.title="Convert issue to discussion\u2026",this.icon="comment-discussion-color-fg-muted"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}fetchDetails(){return document.querySelector("details.js-convert-to-discussion")}run(){var t;const s=this.fetchDetails();if(s){const i=C(()=>{setTimeout(()=>{var r;(r=s.querySelector("[data-menu-button]"))==null||r.focus()},0)},"focusMenu");(t=s.querySelector("include-fragment"))==null||t.addEventListener("load",i),s.open=!0,i()}}}C(yt,"ConvertToDiscussion");var Qs=[Pe,_e,ft,mt,vt,yt],zs=Object.defineProperty,Js=(e,t)=>zs(e,"name",{value:t,configurable:!0});class Ee extends u{constructor(){super(...arguments);this.title="Open in new codespace",this.icon="codespaces-color-fg-muted"}isApplicable(){const t=this.fetchElements();return!!(t.codeModal&&t.codespacesForm&&t.newCodespacesButton&&t.codespacesTab)}run(){const{codeModal:t,codespacesTab:s,newCodespacesButton:i}=this.fetchElements();!(t&&s&&i)||(t.open=!0,s.click(),i instanceof HTMLButtonElement?i.click():(i.parentElement.open=!0,setTimeout(()=>{var r;(r=document.querySelector(".js-create-codespace-with-sku-button"))==null||r.focus()},0)))}fetchElements(){const t=document.querySelector(".js-create-codespaces-form-command"),s=(t==null?void 0:t.closest("details"))||null,i=(s==null?void 0:s.querySelector('[data-tab="cloud"]'))||null,r=(t==null?void 0:t.querySelector('summary[role="button"], button[type="submit"]'))||null;return{codespacesForm:t,codeModal:s,codespacesTab:i,newCodespacesButton:r}}}Js(Ee,"OpenCodespace");var Xs=Object.defineProperty,J=(e,t)=>Xs(e,"name",{value:t,configurable:!0});class gt extends _e{constructor(){super(...arguments);this.title="Edit pull request body"}}J(gt,"EditPullRequestBody");class bt extends Pe{constructor(){super(...arguments);this.title="Edit pull request title"}}J(bt,"EditPullRequestTitle");class _t extends u{constructor(){super(...arguments);this.title="Update current branch",this.icon="sync-color-fg-muted"}isApplicable(){return this.fetchButton()instanceof HTMLButtonElement}fetchButton(){return document.querySelector(".js-update-branch-form button")}run(){const t=this.fetchButton();t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.click())}}J(_t,"UpdateBranch");class Pt extends u{constructor(){super(...arguments);this.title="Convert to draft",this.icon="git-pull-request-draft-color-fg-muted"}isApplicable(){return this.fetchButton()instanceof HTMLButtonElement}fetchButton(){return document.querySelector(".js-convert-to-draft")}run(){var t;const s=(t=this.fetchButton())==null?void 0:t.closest("details");s&&(s.open=!0,setTimeout(()=>{var i;(i=s.querySelector(".js-convert-to-draft"))==null||i.focus()},0))}}J(Pt,"ConvertToDraft");class Et extends u{constructor(){super(...arguments);this.title="Copy current branch name",this.icon="copy-color-fg-muted"}isApplicable(){return this.fetchClipboardCopy()instanceof E}fetchClipboardCopy(){return document.querySelector(".js-copy-branch")}async run(t){const s=this.fetchClipboardCopy();if(s instanceof E){const i=s.value;try{await w(i),t.displayFlash("success","Branch name copied to clipboard!")}catch(r){t.displayFlash("error","Unable to copy branch name to clipboard!")}}}}J(Et,"CopyBranchName");var Vs=[Et,bt,gt,_t,Pt,Ee],Ys=Object.defineProperty,ae=(e,t)=>Ys(e,"name",{value:t,configurable:!0});class It extends u{constructor(){super(...arguments);this.title="Copy file permalink",this.icon="copy-color-fg-muted"}isApplicable(){return this.fetchPermalinkContainer()instanceof HTMLAnchorElement}fetchPermalinkContainer(){return document.querySelector(".js-permalink-shortcut")}async run(t){const s=this.fetchPermalinkContainer();if(s){const i=`${s.href}${window.location.hash}`;try{await w(i),t.displayFlash("success","Copied permalink!")}catch(r){t.displayFlash("error","Failed to copy permalink!")}}}}ae(It,"CopyPermalink");class Ct extends u{constructor(){super(...arguments);this.title="Clone repository: Copy HTTPS",this.icon="copy-color-fg-muted"}isApplicable(){return this.fetchClipboardCopy()instanceof E}fetchClipboardCopy(){return document.querySelector(".js-clone-url-http")}async run(t){const s=this.fetchClipboardCopy();if(s instanceof E){const i=s.value;try{await w(i),t.displayFlash("success","Clone URL copied!")}catch(r){t.displayFlash("error","Clone URL couldn't be copied")}}}}ae(Ct,"CloneCopyHttps");class Tt extends u{constructor(){super(...arguments);this.title="Clone repository: Copy SSH",this.icon="copy-color-fg-muted"}isApplicable(){return this.fetchClipboardCopy()instanceof E}fetchClipboardCopy(){return document.querySelector(".js-clone-url-ssh")}async run(t){const s=this.fetchClipboardCopy();if(s instanceof E){const i=s.value;try{await w(i),t.displayFlash("success","Clone URL copied!")}catch(r){t.displayFlash("error","Clone URL couldn't be copied")}}}}ae(Tt,"CloneCopySsh");class St extends u{constructor(){super(...arguments);this.title="Clone repository: Copy GitHub CLI",this.icon="copy-color-fg-muted"}isApplicable(){return this.fetchClipboardCopy()instanceof E}fetchClipboardCopy(){return document.querySelector(".js-clone-url-gh-cli")}async run(t){const s=this.fetchClipboardCopy();if(s instanceof E){const i=s.value;try{await w(i),t.displayFlash("success","Clone URL copied!")}catch(r){t.displayFlash("error","Clone URL couldn't be copied")}}}}ae(St,"CloneCopyCli");var Zs=[Ct,Tt,St,It,Ee],er=Object.defineProperty,tr=(e,t)=>er(e,"name",{value:t,configurable:!0});class wt extends U{constructor(){super(...arguments);this.itemsByType={},this.everywhereItems=[],this.needsFetch=!0}enabledFor(t){return t.mode===">"}get hasCommands(){return!0}async fetch(t,s=!1){var i;this.loadCommandItems();const r=this.itemsForSubjectType((i=t.subjectType)!=null?i:"");return{results:(t.isBlank()?r:this.fuzzyFilter(r,t)).filter(l=>l.isApplicable(t))}}itemsForSubjectType(t){var s;return[...(s=this.itemsByType[t])!=null?s:[],...this.everywhereItems]}get debounce(){return 0}loadCommandItems(){this.needsFetch&&(this.itemsByType={Issue:Qs.map(t=>t.item),PullRequest:Vs.map(t=>t.item),Repository:Zs.map(t=>t.item),Discussion:Gs.map(t=>t.item)},this.everywhereItems=Us.map(t=>t.item),this.needsFetch=!1)}clearCache(){this.needsFetch=!0}}tr(wt,"MainWindowCommandsProvider");var xt=Object.defineProperty,sr=Object.getOwnPropertyDescriptor,rr=(e,t)=>xt(e,"name",{value:t,configurable:!0}),ir=(e,t,s,i)=>{for(var r=i>1?void 0:i?sr(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&xt(t,s,r),r};let X=class extends P{static create(e){let t,s;if(e.scope.type==="repository")t=`in ${e.scope.text}`,s=`/${e.scope.text}/search?q=${e.text}`;else if(e.scope.type==="owner"){const i=`org:${e.scope.text} ${e.text}`;t=`in ${e.scope.text}`,s=`/search?q=${i}`}else t="across all of GitHub",s=`/search?q=${e.text}`;return new X({title:`Search ${e.text}${t}`,typeahead:"",priority:-10,score:-10,group:m.footerGroupId,action:{type:"jump_to",description:"",path:s},icon:{type:"octicon",id:"search-color-fg-muted"},titleScope:t})}constructor(e){super(e);this.titleScope=e.titleScope}render(e,t){const s=super.render(e,void 0);if(t){const i=[];i.push(document.createTextNode("Search"));const r=document.createElement("strong");r.textContent=` '${t}' `,i.push(r),i.push(document.createTextNode(this.titleScope)),s.titleNodes=i}return s}autocomplete(e){}calculateScore(e){return 0}};rr(X,"SearchLinkItem"),X=ir([_],X);var nr=Object.defineProperty,or=(e,t)=>nr(e,"name",{value:t,configurable:!0});class $t extends U{enabledFor(t){return!(t.isBlank()||t.mode==="?"||t.mode===">")}clearCache(){}get hasCommands(){return!1}async fetch(t,s=!1){return{results:[X.create(t)]}}}or($t,"SearchLinksProvider");var ar=Object.defineProperty,cr=(e,t)=>ar(e,"name",{value:t,configurable:!0});class Ie{static create(t){const s=this.providers[t.type];if(!s)throw new Error(`Unknown provider type: ${t.type}`);return new s(t)}}cr(Ie,"ServerDefinedProviderFactory"),Ie.providers={remote:fe,prefetched:re,files:st,help:rt,"search-links":$t,"main-window-commands":wt};var Dt=Object.defineProperty,lr=Object.getOwnPropertyDescriptor,ur=(e,t)=>Dt(e,"name",{value:t,configurable:!0}),O=(e,t,s,i)=>{for(var r=i>1?void 0:i?lr(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&Dt(t,s,r),r};let T=class extends pe{constructor(){super(...arguments);this._wildcard="*"}get debounce(){return parseInt(this.fetchDebounce,10)}get hasCommands(){return this.supportsCommands}get hasWildCard(){return this.modes.includes(this._wildcard)}get modes(){return this.supportedModes===""&&(this._modes=[""]),this._modes||(this._modes=JSON.parse(this.supportedModes)),this._modes}get scopeTypes(){return this.supportedScopeTypes===""?[]:(this._scopeTypes||(this._scopeTypes=JSON.parse(this.supportedScopeTypes)),this._scopeTypes)}connectedCallback(){this.provider=Ie.create(this)}};ur(T,"ServerDefinedProviderElement"),O([a],T.prototype,"type",2),O([a],T.prototype,"supportedModes",2),O([a],T.prototype,"fetchDebounce",2),O([a],T.prototype,"supportedScopeTypes",2),O([a],T.prototype,"src",2),O([a],T.prototype,"supportsCommands",2),T=O([y],T);var jt=Object.defineProperty,hr=Object.getOwnPropertyDescriptor,dr=(e,t)=>jt(e,"name",{value:t,configurable:!0}),pr=(e,t,s,i)=>{for(var r=i>1?void 0:i?hr(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&jt(t,s,r),r};let V=class extends g{static from(e){return new V({title:e.title,typeahead:"",priority:-10-e.index,score:-10,group:e.group,action:{type:"help",description:"",prefix:e.prefix},persistentHint:e.persistentHint})}constructor(e){super(e);this.persistentHint=e.persistentHint}getHint(){return p``}render(e,t){const s=super.render(e,void 0),i=document.createElement("span");return i.innerHTML=this.title,s.titleNodes=[i],this.persistentHint&&(s.persistentHint.innerHTML=this.persistentHint,s.persistentHint.hidden=!1),s}activate(e,t){e.commandPaletteInput.value=this.action.prefix+e.getTextWithoutMode()}autocomplete(e){e.commandPaletteInput.value=this.action.prefix+e.getTextWithoutMode()}calculateScore(e){return 0}get action(){return this._action}};dr(V,"HelpItem"),V=pr([_],V);var Lt=Object.defineProperty,mr=Object.getOwnPropertyDescriptor,fr=(e,t)=>Lt(e,"name",{value:t,configurable:!0}),F=(e,t,s,i)=>{for(var r=i>1?void 0:i?mr(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&Lt(t,s,r),r};let x=class extends HTMLElement{connectedCallback(){this.hidden=!0}show(e){return this.isEnabledScopeType(e)}isEnabledScopeType(e){return this.scopeTypes?this.scopeTypes&&JSON.parse(this.scopeTypes).includes(e.scope.type):!0}toItem(e){const t={group:this.group,title:this.titleElement.innerHTML,index:e};return this.prefix&&(t.prefix=this.prefix),this.hintElement.textContent&&(t.persistentHint=this.hintElement.innerHTML),V.from(t)}};fr(x,"CommandPaletteHelpElement"),F([a],x.prototype,"group",2),F([a],x.prototype,"prefix",2),F([a],x.prototype,"scopeTypes",2),F([b],x.prototype,"titleElement",2),F([b],x.prototype,"hintElement",2),x=F([y],x);var Ot=Object.defineProperty,vr=Object.getOwnPropertyDescriptor,yr=(e,t)=>Ot(e,"name",{value:t,configurable:!0}),gr=(e,t,s,i)=>{for(var r=i>1?void 0:i?vr(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&Ot(t,s,r),r};let ce=class extends g{static from(e){return new ce({title:e.title,priority:e.priority,group:e.group,subtitle:e.subtitle,match_fields:e.match_fields,typeahead:e.typeahead,hint:e.hint,score:0,action:{type:"api-defined-item",activate:e.activate,copy:e.copy}})}constructor(e){super(e)}get action(){return this._action}activate(e,t){super.activate(e,t),this.action.activate(e,t)}copy(e){super.copy(e),this.action.copy(e)}};yr(ce,"APIDefinedItem"),ce=gr([_],ce);var Mt=Object.defineProperty,br=Object.getOwnPropertyDescriptor,_r=(e,t)=>Mt(e,"name",{value:t,configurable:!0}),Pr=(e,t,s,i)=>{for(var r=i>1?void 0:i?br(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&Mt(t,s,r),r};let Ce=class extends g{constructor(e){super(e)}get action(){return this._action}get activateTrackingEventType(){return"command_executed"}activate(e){super.activate(e),e.runCommand(this.title,this.action.command.id)}};_r(Ce,"CustomCommandItem"),Ce=Pr([_],Ce);var kt=Object.defineProperty,Er=Object.getOwnPropertyDescriptor,Ir=(e,t)=>kt(e,"name",{value:t,configurable:!0}),Cr=(e,t,s,i)=>{for(var r=i>1?void 0:i?Er(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&kt(t,s,r),r};let Te=class extends P{getAvatarTemplate(e,t){return p`<img src="${e}" alt="${t}" class="avatar avatar-1 avatar-small" />`}};Ir(Te,"JumpToOrgItem"),Te=Cr([_],Te);var At=Object.defineProperty,Tr=Object.getOwnPropertyDescriptor,Sr=(e,t)=>At(e,"name",{value:t,configurable:!0}),wr=(e,t,s,i)=>{for(var r=i>1?void 0:i?Tr(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&At(t,s,r),r};let Se=class extends P{getAvatarTemplate(e,t){return p`<img src="${e}" alt="${t}" class="avatar avatar-1" />`}};Sr(Se,"JumpToTeamItem"),Se=wr([_],Se);var qt=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,Ht=(e,t)=>qt(e,"name",{value:t,configurable:!0}),Bt=(e,t,s,i)=>{for(var r=i>1?void 0:i?xr(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(i?o(t,s,r):o(r))||r);return i&&r&&qt(t,s,r),r};let R=class extends HTMLElement{constructor(){super(...arguments);this.setupComplete=!1,this.connected=!1,this.multiPageEnabled=!1}static get observedAttributes(){return["value","typeahead","scope"]}setup(){this.classList.add("d-flex","flex-items-center","flex-nowrap","py-1","pl-3","pr-2","border-bottom"),this._renderElement(),this.onInputBound=this.onInput.bind(this),this.onKeydownBound=this.onKeydown.bind(this),this.onClearBound=this.onClear.bind(this),this.input=this.querySelector("input.js-input"),this.overlayInput=this.querySelector("input.js-overlay-input"),this.clearButton=this.querySelector(".js-clear"),this.scopeElement=this.querySelector("command-palette-scope"),this.searchIcon=this.querySelector(".js-search-icon"),this.spinner=this.querySelector(".js-spinner"),this.defaultScope=this.scope,this.hasAttribute("autofocus")&&this.input.focus(),this.input.addEventListener("input",this.onInputBound),this.input.addEventListener("keydown",this.onKeydownBound),this.clearButton.addEventListener("click",this.onClearBound),this.clearButton.addEventListener("keydown",e=>{e.key==="Enter"&&this.onClearBound(e)}),this.clearButton.hidden=!0,this.scopeElement.addEventListener("click",()=>{this._dispatchEvent("command-palette-descope")}),this.value.length!==0&&this._dispatchEvent("command-palette-input"),this.setupComplete=!0}connectedCallback(){this.setupComplete||this.setup(),this.value=this.getAttribute("value")||"",this.typeahead=this.getAttribute("typeahead")||"",this.placeholder=this.getAttribute("placeholder")||"",this.connected=!0}attributeChangedCallback(e,t,s){!this.input||(e==="typeahead"?this.typeahead=s:e==="value"&&(this.value=s,this._dispatchEvent("command-palette-input")))}focus(){this.input.focus()}setRemovedTokenAndSelect(e){e&&(this.value=e),this.focus(),this.input.select()}get scope(){return this.scopeElement.scope}set scope(e){this.scopeElement.scope=e}hasScope(){return this.scopeElement.hasScope()}clearScope(){return this.scopeElement.clearScope()}removeToken(){return this.scopeElement.removeToken()}get placeholder(){return this.input.getAttribute("placeholder")||""}set placeholder(e){this.input.setAttribute("placeholder",e)}get typeaheadPlaceholder(){var e;return((e=M(this,"typeaheadPlaceholder"))==null?void 0:e.textContent)||""}set typeaheadPlaceholder(e){const t=M(this,"typeaheadPlaceholder");t.textContent=e}get value(){var e;return((e=this.input)==null?void 0:e.value)||""}set value(e){this.input.value=e,this.typeahead=e,this.resetPlaceholder(),this.onInput()}get overlay(){return this.overlayInput.value}set overlay(e){this.overlayInput.value=e}set mirror(e){const t=M(this,"mirror");t.textContent=e}get typeaheadText(){return M(this,"typeaheadText").textContent||""}set typeaheadText(e){const t=M(this,"typeaheadText");t.textContent=e}get typeahead(){return this.typeaheadValue}set typeahead(e){if(this.typeaheadValue=this.overlay+e,this.mirror=this.value,e==="")this.typeaheadText="";else if(this.placeholder="",this.typeaheadPlaceholder="",this.valueStartsWithTypeahead){const t=this.value.length-(this.overlay?1:0);this.typeaheadText=e.substring(t)}else this.typeaheadText=` \u2013 ${e}`}showModePlaceholder(e=""){this.typeaheadPlaceholder=e}get valueStartsWithTypeahead(){return this.typeaheadValue.toLowerCase().startsWith(this.value.toLowerCase())}get isCursorAtEnd(){return this.value.length===this.input.selectionStart}set loading(e){this.spinner.hidden=!e,this.searchIcon.hidden=e}resetScopeIfNeeded(){this.value===""&&this.scope.id!==this.defaultScope.id&&(this.scope=this.defaultScope)}resetPlaceholder(){this.value.replace(this.overlay,"")&&this.overlay&&(this.typeaheadPlaceholder=""),this.placeholder=this.getAttribute("placeholder")||""}onInput(){this.resetPlaceholder(),this.clearButton.hidden=!this.hasSomethingToClear(),!!this.connected&&this._dispatchEvent("command-palette-input")}onClear(){this.value="",this.input.focus(),this._dispatchEvent("command-palette-cleared")}onKeydown(e){if(this.isSelectKeystroke(e.key)&&(this._dispatchEvent("command-palette-select"),e.stopImmediatePropagation(),e.preventDefault()),this.hasSomethingToClear()&&Q(e)&&e.key==="Backspace"){this.onClear();return}if(this.input.selectionStart===0&&this.input.selectionEnd===0&&(this.hasScope()||this.multiPageEnabled)&&e.key==="Backspace"){this._dispatchEvent("command-palette-descope"),e.stopImmediatePropagation(),e.preventDefault();return}}hasSomethingToClear(){return this.scopeElement.hasScope()||this.value.length>0}isSelectKeystroke(e){return e==="Tab"||e==="ArrowRight"&&this.isCursorAtEnd}textSelected(){return this.input.selectionStart!==this.input.selectionEnd}_dispatchEvent(e){const t=new CustomEvent(e,{cancelable:!0,detail:{typeahead:this.typeahead,value:this.value}});return this.dispatchEvent(t)}_renderElement(){const t=`${ge()?"\u2318":"Ctrl"} + Backspace`;Z(Ht(()=>p`
        <div class="command-palette-input-group flex-1 form-control border-0 box-shadow-none" style="z-index: 0">
          <div class="command-palette-typeahead position-absolute d-flex flex-items-center Truncate">
            <span class="typeahead-segment input-mirror" data-target="command-palette-input.mirror"></span>
            <span class="Truncate-text" data-target="command-palette-input.typeaheadText"></span>
            <span class="typeahead-segment" data-target="command-palette-input.typeaheadPlaceholder"></span>
          </div>
          <input
            class="js-overlay-input color-fg-muted typeahead-input form-control border-0 box-shadow-none input-block width-full position-absolute"
            style="background-color: transparent; pointer-events: none; padding: inherit;"
            disabled
            tabindex="-1"
            aria-label="Color overlay"
          />
          <input
            type="text"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
            class="js-input typeahead-input form-control border-0 box-shadow-none input-block width-full"
            aria-label="Command palette input"
            aria-haspopup="listbox"
            aria-expanded="false"
            aria-autocomplete="list"
            aria-controls="command-palette-item-stack"
            role="combobox"
          />
        </div>
        <button
          class="js-clear btn-link color-fg-muted no-underline px-2 tooltipped tooltipped-w"
          role="button"
          tabindex="0"
          aria-label="${t}"
        >
          Clear
        </button>
      `,"inputTemplate")(),this)}};Ht(R,"CommandPaletteInputElement"),R.tagName="command-palette-input",Bt([a],R.prototype,"multiPageEnabled",2),R=Bt([y],R);var $r=Object.defineProperty,S=(e,t)=>$r(e,"name",{value:t,configurable:!0});window.customElements.get(f.tagName)||window.customElements.define(f.tagName,f);const Dr=Y(()=>{const e=le();!e||e.clearCommands(!1)},1500);function Ft(){const e=le();if(!e)return;const t=e.closest(".js-command-palette-dialog");!t||(t.addEventListener("toggle",()=>{t.open?e.activate():e.deactivate()}),document.addEventListener("keydown",Rt),je(".js-socket-channel.js-updatable-content",{subscribe:s=>ke(s,"socket:message",Dr)}))}S(Ft,"observeCommandPalette");function le(){return document.querySelector(f.tagName)}S(le,"findCommandPalette");function Rt(e){if(Q(e)&&(e.key.toLowerCase()==="k"||e.key==="\u02DA")){if(we()||!e.shiftKey&&!e.altKey&&Wt(e))return;xe(e.shiftKey),e.preventDefault(),e.stopPropagation()}else if(Q(e)&&e.key.toLowerCase()==="p"&&we()){const t=le();t&&t.hasAttribute("data-memex-hotkey-enabled")&&(xe(e.shiftKey),e.preventDefault(),e.stopPropagation())}}S(Rt,"handleKeyDown");function Wt(e){return Gt(e)||Nt(e)}S(Wt,"shouldIgnoreCommandK");function Gt(e){const t=e.target;return t?t.closest(".js-previewable-comment-form")!==null:!1}S(Gt,"triggeredInsideAPreviewableCommentForm");function Nt(e){const t=e.target;if(!t)return!1;const s=t.closest(".js-code-editor");if(!s)return!1;const i=Ae(s);if(!i)return!1;const r=i.editor;if(!r)return!1;const n=r.getMode().name;return n==="gfm"||n==="markdown"}S(Nt,"triggeredInsideAMarkdownCodeEditor");function we(){return!!document.querySelector("#memex-root")}S(we,"triggeredInsideMemex");function xe(e){for(const t of document.querySelectorAll(".js-command-palette-dialog")){const s=t.querySelector(R.tagName);if(!s)return;if(t.open)t.open=!1;else{Ut(s,e);const i=t.querySelector(f.tagName);i&&(i.previouslyActiveElement=document.activeElement),t.open=!0}}}S(xe,"toggleCommandPalette");function Ut(e,t){const s=e.value.startsWith(">");return t&&!s?(e.value=`>${e.value}`,!0):!t&&s?(e.value=e.value.substring(1),!0):!1}S(Ut,"toggleCommandMode"),Ft()}}});
//# sourceMappingURL=command-palette-dc794f51.js.map
